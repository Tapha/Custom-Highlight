!function(t,e,o,s){"use strict";let n="customHighlight",i={actions:[{test_action:"Test action"}],position:"left",textcolor:"on",backgroundcolor:"off"};class l{constructor(e,o){this.element=e,this.settings=t.extend({},i,o),this._defaults=i,this._name=n,this.init()}init(){let e,s;t(o).mousemove(t=>{e=t.pageX,s=t.pageY-10}),t(this.element).mouseup(t=>this.handleMouseUp(t))}handleMouseUp(e){let o=this.getSelectedText();if(""!=o){let s=this.add_cs_class(o),n=t("#"+s);this.applyTextcolor(n),this.applyBackgroundcolor(n,n.css("color")),this.applyActionsToElement(n)}}getSelectedText(){return o.all?o.selection.createRange().text:o.getSelection()}applyTextcolor(t){if("on"==this.settings.textcolor){let e="#"+Math.random().toString(16).slice(2,8);t.css("color",e)}}applyBackgroundcolor(t,e){if("on"==this.settings.backgroundcolor){let o="#"+Math.random().toString(16).slice(2,8);e==o&&(o="#"+Math.random().toString(16).slice(2,8)),t.addClass(".light").css("color","#3A393C"),t.addClass(".dark").css("color","#FBFBFB"),t.css("background-color",o),t.colourBrightness()}}applyActionsToElement(t){let e=this.settings.actions,o="";e.length>0&&(o=this.getButtonsFromActions(e)),t.tooltipster({content:o,multiple:!0,position:this.settings.position,delay:100,maxWidth:500,speed:300,interactive:!0,animation:"grow",trigger:"hover",contentAsHTML:!0})}getButtonsFromActions(t){let e=Object.keys(t[0])[0],o="";if("test_action"==e)o="<button type='button' class='btn' onclick=test_action('"+curr_span_id_for_use+"')>Test Action</button>";else for(let s of t)for(let n in s)o+="<button type='button' class='btn' onclick="+n+"('"+curr_span_id_for_use+"')>"+s[n]+"</button> ";return o}add_cs_class(t){let e=t,s=e.toString(),n=o.createElement("SPAN");n.textContent=" + "+s+" + ",n.classList.add("cs-editing"),n.classList.add("tooltip");let i=e.getRangeAt(0);i.deleteContents(),i.insertNode(n);let l=Math.random().toString(36).slice(2);return n.id="cs-editing-"+l,n.id}test_action(){alert("Here's a Test Action!")}}t.fn[n]=function(e){return this.each(function(){t.data(this,"plugin_"+n)||t.data(this,"plugin_"+n,new l(this,e))})}}(jQuery,window,document);
